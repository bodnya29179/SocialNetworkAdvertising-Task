TYPE=TRIGGERS
triggers='CREATE DEFINER=`root`@`localhost` TRIGGER after_orders_insert\nAFTER INSERT ON orders\nFOR EACH ROW\nBEGIN\nSET @customer_type = (SELECT TypeName FROM usertypes INNER JOIN users WHERE usertypes.TypeID = users.TypeID AND users.UserID = NEW.CustomerID);\nIF @customer_type != \'customer\' THEN\nSIGNAL SQLSTATE \'45001\' SET MESSAGE_TEXT = \'User must be a customer!\';\nEND IF;\nSET @performer_type = (SELECT TypeName FROM usertypes INNER JOIN users WHERE usertypes.TypeID = users.TypeID AND users.UserID = NEW.PerformerID);\nIF @performer_type != \'performer\' THEN\nSIGNAL SQLSTATE \'45001\' SET MESSAGE_TEXT = \'User must be a performer!\';\nEND IF;\nEND' 'CREATE DEFINER=`root`@`localhost` TRIGGER after_orders_update\nAFTER UPDATE ON orders\nFOR EACH ROW\nBEGIN\nSET @customer_type = (SELECT TypeName FROM usertypes INNER JOIN users WHERE usertypes.TypeID = users.TypeID AND users.UserID = NEW.CustomerID);\nIF @customer_type != \'customer\' THEN\nSIGNAL SQLSTATE \'45001\' SET MESSAGE_TEXT = \'User must be a customer!\';\nEND IF;\nSET @performer_type = (SELECT TypeName FROM usertypes INNER JOIN users WHERE usertypes.TypeID = users.TypeID AND users.UserID = NEW.PerformerID);\nIF @performer_type != \'performer\' THEN\nSIGNAL SQLSTATE \'45001\' SET MESSAGE_TEXT = \'User must be a performer!\';\nEND IF;\nEND'
sql_modes=1342177280 1342177280
definers='root@localhost' 'root@localhost'
client_cs_names='utf8mb4' 'utf8mb4'
connection_cl_names='utf8mb4_unicode_ci' 'utf8mb4_unicode_ci'
db_cl_names='utf8mb4_unicode_ci' 'utf8mb4_unicode_ci'
